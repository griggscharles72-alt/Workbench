# ProtonVPN Full Desktop Protection (Linux)

This guide configures a Linux system so **all internet traffic is forced through ProtonVPN**.

If the VPN disconnects, internet access immediately stops.

This creates a hardened environment with:

* No IP leaks
* No DNS leaks
* System-wide VPN routing
* Manual user control (no auto-start required)

Works with the free tier of ProtonVPN.

---

# Step 1 — Install ProtonVPN

```bash
sudo apt update
sudo apt install -y protonvpn-cli
```

Login:

```bash
protonvpn-cli login
```

Connect once:

```bash
protonvpn-cli connect
```

---

# Step 2 — Identify Network Interfaces

Run:

```bash
ip a
```

You are looking for:

* Your normal internet interface (example: `wlp2s0` for Wi-Fi)
* The VPN interface (usually `proton0`)

Example:

```
wlp2s0   → local network
proton0  → VPN tunnel
```

---

# Step 3 — Enable Kill Switch Firewall

⚠️ This will block internet unless VPN is active.

```bash
sudo iptables -F
sudo iptables -X

sudo iptables -P INPUT DROP
sudo iptables -P OUTPUT DROP
sudo iptables -P FORWARD DROP

# Allow loopback
sudo iptables -A INPUT -i lo -j ACCEPT
sudo iptables -A OUTPUT -o lo -j ACCEPT

# Allow VPN tunnel
sudo iptables -A OUTPUT -o proton0 -j ACCEPT
sudo iptables -A INPUT -i proton0 -j ACCEPT

# Allow DHCP (change interface if needed)
sudo iptables -A OUTPUT -o wlp2s0 -p udp --dport 67:68 --sport 67:68 -j ACCEPT
sudo iptables -A INPUT -i wlp2s0 -p udp --dport 67:68 --sport 67:68 -j ACCEPT
```

---

# Step 4 — Use Normally

Connect VPN whenever you want internet:

```bash
protonvpn-cli connect
```

Disconnect VPN:

Internet stops automatically.

---

# Emergency Reset (Restore Internet)

```bash
sudo iptables -F
sudo iptables -X
sudo iptables -P INPUT ACCEPT
sudo iptables -P OUTPUT ACCEPT
sudo iptables -P FORWARD ACCEPT
```

---

# Security Model

Traffic path:

```
Apps → Firewall → VPN → Internet
```

If VPN is down:

```
Apps → Firewall → BLOCKED
```

---

# Notes

* Manual control is intentional for security awareness.
* Interface names vary per system.
* Works on Ubuntu / Debian based systems.

---

# License

MIT
